# mobes AIcam control Tower 画面仕様

## 概要
3ペイン構成の監視画面

| ペイン | 位置 | 幅 | 役割 |
|--------|------|-----|------|
| サジェストビュー | 左 | 30% | AI検知カメラの動画表示 |
| カメラタイル | 中央 | 55% | 全カメラのスナップショット一覧 |
| AI Event Log | 右 | 15% | イベントログ＋チャット |

---

## サジェストビュー（左ペイン 30%）

### 機能
- AI Eventで検知されたカメラを最大3台まで go2rtx を利用して映像表示
- 画面構成の左端 **30%**（px固定ではなく%指定）

### 動画再生ルール
- イベント検出判定されたカメラの動画映像を最大3カメラ表示
- 新しくイベントが発生した別カメラがあればスライドインで一番上に追加
- 動画は止めない（スライドイン中も再生継続）

### 再生時間管理
- 設定: `onairtime`（設定モーダルに追加）
- デフォルト: 180秒
- 再生中に該当カメラのイベント検知が来たら再生延長
- 最後にイベント検知が来てから `onairtime` の時間再生

### 3台超過時の挙動
- 3つ以上検知した場合は最古のビューを下に押し流して再生終了
- 自動で再生が始まって自動で終わることが重要

### アニメーション
- 挿入時にスライドイン
- 下に押し込むアニメーション
- イベント延長した場合に上下のカメラが入れ替わる場合あり

---

## カメラタイル（中央ペイン 55%）

### レイアウト
- 画面構成の **55%**
- **4列固定**
- 最大31台（4列×8段=32 - 1(カメラスキャン)）

### タイル形状
- デフォルト: 1:1 スクエア
- **重要**: 画面下端に到達した場合はタイルを縮小（スクロールさせない）
- 文字サイズは維持

### インタラクション
- タイルの画像部分（設定歯車以外）をクリック → モーダルを開き該当カメラの動画を再生
- イベント検知（オンエア中）カメラを黄色でタイル外周をハイライト

---

## AI Event Log（右ペイン 15%）

### レイアウト
- 画面構成の **15%**（px固定ではなく%指定）

### 上半分: 推論ログ
- is21の推論ログを表示
- イベント検出のチューニングは後続タスク

### 下半分: チャットウインドウ
- **必須機能**（現在未実装）
- 下端に入力ウインドウ
- 文字数で自動フィールド縦伸縮
- 送信ボタン

### チャット機能
- mobes2.0システムと連携
- AIイベントログとカメラコンテキスト情報から直近のサマリーをLLM生成
- 件数および時間ベースで報告表示
- ユーザーとの会話窓口（例: 「***な人来なかった？」）

---

## 技術メモ

### go2rtx連携
- サジェストビューでの動画再生に使用
- 詳細設計とテストが必要な大きなタスク

### 設定モーダル追加項目
- `onairtime`: サジェストビュー再生時間（デフォルト180秒）

---

*Created: 2026-01-03*

了解です。**2026-01 時点の Claude Code 公式仕様（メモリ階層 / `@import` / `.claude/rules` / `paths` など）**を踏まえて、**各プロジェクトで使い回せる汎用テンプレ一式**を作りました。以下をそのままコピペして雛形にできます。 ([Claude Code][1])

---

## 1) 最新仕様ベースの“勝ち筋”方針

* **`CLAUDE.md` は薄く**（入口・参照先・最重要コマンドだけ）。重い情報は「別ファイル」に逃がす。 ([Claude Code][1])
* ルールは **`.claude/rules/` でモジュール化**できる（チーム共有向き）。`paths:` で条件適用も可能。 ([Claude Code][1])
* **ローカル固有情報（URL/認証/踏み台など）は `CLAUDE.local.md` に隔離**（自動で `.gitignore` に入る）。 ([Claude Code][1])
* 必要なら `@path/to/file` で **インポート**（相対/絶対OK、最大 5 hop、コードブロック内では評価されない）。 ([Claude Code][1])
* 共有の“社内規約”は **シンボリックリンクで再利用**もできる。 ([Claude Code][1])

> 重要：**Claude Code 2.0.76 で `paths:` 付き rules が“全部ロードされる”回帰バグ報告**があります。テンプレ側で回避策も入れています（後述）。 ([GitHub][2])

---

## 2) 推奨ディレクトリ構成（汎用テンプレ）

```text
your-repo/
├─ CLAUDE.md
├─ CLAUDE.local.md                 # ローカル専用（自動 gitignore）
├─ docs/
│  ├─ PROJECT_CONTEXT.md           # 共有したい“情報”のSSoT（秘密は書かない）
│  ├─ RUNBOOK.md                   # 運用手順（任意）
│  └─ GOLDEN_RULES.md              # ゴールデンルール（内容維持・構造改善）
└─ .claude/
   └─ rules/
      ├─ 00_golden_rules.md        # ルール適用の入口（docsへ参照 or symlink）
      ├─ 10_workflow.md            # Git/レビュー/作業の進め方
      ├─ 20_testing.md             # テスト規約
      ├─ 30_security.md            # 秘密情報/危険操作の扱い
      └─ 90_domain_notes.md        # ドメイン固有（IoT等）※必要なら
```

この構成は、公式の「プロジェクトメモリ」「プロジェクトルール」「ローカルメモリ」をそのまま使い分ける形です。 ([Claude Code][1])

---

## 3) テンプレ本体（コピペ用）

### 3.1 `CLAUDE.md`（薄い入口）

```md
# Claude Code Project Memory (Entry)

## Non-negotiables
- This repo uses Golden Rules. Always comply with: docs/GOLDEN_RULES.md
- Reports and task outputs MUST be in Japanese (see Golden Rules).
- Do not invent facts. If ambiguous, state ambiguity and verify with code/tests/logs.
- Do not commit secrets. Put private endpoints/credentials in CLAUDE.local.md.

## Where to look (SSoT)
- Project context (architecture / environments / endpoints): docs/PROJECT_CONTEXT.md
- Ops runbook (deploy / rollback / on-call): docs/RUNBOOK.md (if present)

## Common commands (fill in)
- Install: `<command>`
- Build: `<command>`
- Lint/Format: `<command>`
- Test (unit): `<command>`
- Test (e2e / UI): `<command>`
- Dev server: `<command>`
- Deploy: `<command>`

## Notes
- You can check what memories are loaded with `/memory`.
- Use `/init` if you need to bootstrap a new CLAUDE.md for another repo.
```

`/memory` と `/init`、および「ローカルメモリ」などは公式に記載があります。 ([Claude Code][1])

---

### 3.2 `docs/PROJECT_CONTEXT.md`（情報SSoT・秘密は書かない）

```md
# Project Context (SSoT)

> Purpose: Provide stable, shareable context for this repository.
> DO NOT put secrets here (passwords, tokens, private keys, production credentials).
> Put private details in `CLAUDE.local.md` instead.

## 1. Project overview
- Product / system name:
- Goal / non-goals:
- Key constraints (latency, offline, VPN, edge-only, etc.):

## 2. Architecture (high level)
- Components:
  - `<component>`: role / responsibility
- Data flow (1 screen):
  - `<A> -> <B> -> <C>`
- Storage / message bus:
- AuthN/AuthZ model:

## 3. Repo map
- `/<dir>`: purpose
- Key entrypoints:
- Configuration files:
- Generated artifacts:

## 4. Environments (no secrets)
- Local/dev:
  - Base URL:
  - Feature flags:
- Staging:
  - Base URL:
- Production:
  - Base URL:
- Observability:
  - Logs:
  - Metrics:
  - Traces:

## 5. Operational assumptions
- Network / VPN assumptions:
- Timezone / locale assumptions:
- Backup / retention:
- Rate limits / quotas:

## 6. Definition of Done (project-level)
- Tests required:
- Review required:
- Docs required:
- Rollback plan required (when applicable):
```

---

### 3.3 `CLAUDE.local.md`（ローカル専用：URL/認証/実機IP 等）

```md
# Local Project Memory (PRIVATE)

> This file is private to your machine.
> Put sensitive or environment-specific info here (endpoints, IPs, credentials, jump hosts).
> Never copy its secrets into committed files.

## 1. Local endpoints / devices
- Device A:
  - URL:
  - IP:
  - SSH user:
  - SSH password:
- Device B:
  - ...

## 2. Local test accounts (if needed)
- Tenant / org:
- Test user:
- Test data notes:

## 3. Local workflow shortcuts
- VPN up/down commands:
- Port forwards:
- Frequently used SSH commands:
- Docker compose profiles:

## 4. Safety
- Any “do not run” commands in prod:
- Any irreversible operations:
```

`CLAUDE.local.md` はローカル専用として扱え、gitignore に自動追加される旨が公式にあります。 ([Claude Code][1])

---

### 3.4 `docs/GOLDEN_RULES.md`（内容維持・構造だけ改善）

> ここは **あなたの原文の“意味を変えず”**、読みやすい構造に整理したテンプレです（番号と文言は維持、見出しだけ追加）。

```md
# Golden Rules (Project Contract)

## 0. 前提
- 本ドキュメントは、あらゆるタスクの開始時・終了時に照合される「契約」です。
- ルール違反が発生した場合は直ちに作業を止め、現在位置を確認し、リカバー後に再開します。

---

## 1. 絶対遵守の大原則（必ず作業前と作業後にこことの照合を行う）

### 1) 設計・構造・品質
1. SSoTの大原則を遵守し同一内容のデータソースを乱立しない  
2. Solidの原則を意識し特に単一責任、開放閉鎖、置換原則、依存逆転に注意  
3. MECEを意識、このコードはMECEであるか、この報告はMECEであるかを報告の中に加える  
4. アンアンビギュアスな報告回答を義務化しアンアンビギュアスに到達できていない場合はアンアンビギュアスであると宣言できるまで明確な検証を行う  

### 2) 情報の扱い・判断姿勢
5. 根拠なき自己解釈で情報に優劣を持たせる差別コード、レイシストコードは絶対の禁止事項です。情報は如何なる場合においても等価であり、優劣をつけて自己判断で不要と判断した情報を握り潰すような仕様としてはならない。全てのユーザーは情報を確認する権利を有する。ただし誤操作防止などの理由がある場合はこの限りではない。  
6. "ファイルがあるからヨシ","見てないけど他の依存が大丈夫だからヨシ"、"とりあえず動かすのにハードコードで値取得したフリしてるけど動いてるからヨシ"といった"現場猫案件"は禁止  
7. 優先順位は依存関係と実装順によってのみ定義される。棚上げにして将来実装などというケースはありません。  
8. 実施手順と大原則に違反した場合は直ちに作業を止め再度現在位置を確認の上でリカバーしてから再度実装に戻る  
9. チェック、テストのない完了報告は報告と見做されない  
10. 確証バイアスやサンクコストに絡め取られて観測された現象を否定してはならない  
11. 使えない、仕様上の問題あるけど仕様だからOKといった問題解決を見ない矮小化は禁止する  
12. 依存関係と既存の実装を尊重し、確認し、車輪の再発明行為は絶対に行わない  

### 3) プロセス・契約・ドキュメント
13. タスクの開始時の契約として必ずこの実施手順と大原則を全文省略なく確認し、タスク終了時に宣言が履行されているか報告することをタスクにおける契約とする  
14. 要件を変更しゴールを動かすことは禁止。  
15. 設計ドキュメントのない実装、タスクリスト、テストリストの無い受け入れ条件が曖昧な実装は禁止です。  
16. ルール無視はルールを無視した時点からやり直すこと。  
17. 報告は必ず日本語で行うこと  

### 4) トラブルシュート姿勢・実装統合
18. 何かのトラブルがあった際は外的要因や環境要因を疑う前に必ずコードを疑うこと  
19. araneaDeviceGate,認証登録系の登録、実証とテストはaranea_SDKを使用する。  

---

## 2. あらゆるアクションに共通する基本の手順（復唱不要）

1. 指示があった場合は必ず現象の確認もしくは現在の実装の確認を行う。  
2. よほど簡易なタスクでない限りは必ず該当の設計、タスクに関する概要ドキュメントを作成する。ただし軽微なタスクに冗長な手法を採用する必要はない  
3. その後必ず概要ドキュメントと実体、実装の整合性が取れているか確認する。  
4. 概要ドキュメントと実体、実装の生合成が確認できたら項目ごとの詳細かつアンアンビギュアス、MECEな詳細設計を作成する。  
5. 設計インデックスとタスクリスト、テスト計画を作成する。テストは必ずフロントエンド、バックエンド、chromeアクセスでの実UI/UXのテストとし、テストの簡素化は原則として認められない。  
6. これら全てが揃ったらGithubにIssue登録する。  
7. その後実装前の段階を必ずコミットプッシュする。  
8. 実装を開始する。必ず全フェースにおいて`大原則の宣言`の複勝を行う  
9. テストまで実行し報告する  
```

---

### 3.5 `.claude/rules/00_golden_rules.md`（ルール適用の“入口”）

```md
# Golden Rules (applies to all tasks)

- Always comply with `docs/GOLDEN_RULES.md`.
- If any conflict exists, Golden Rules take priority.
- All outputs must be Japanese.

(When needed, open and follow: docs/GOLDEN_RULES.md)
```

> ゴールデンルール本体は `docs/` に置くことで「情報SSoT」としての見通しが良くなり、`.claude/rules/` 側は“適用入口”として軽量化できます。

---

### 3.6 `.claude/rules/10_workflow.md`（汎用ワークフロー規約）

```md
# Workflow Rules

- Prefer small, reviewable changes (MECE, minimal diff).
- Before implementation: confirm current behavior from code/logs/tests.
- After implementation: run tests and report evidence (commands + key outputs).

## Reporting format (template)
- 目的:
- 現状確認（根拠）:
- 変更点（MECE）:
- テスト（実行コマンド/結果）:
- 影響範囲:
- 未確定点（アンアンビギュアス宣言）:
```

---

### 3.7 `.claude/rules/20_testing.md`（汎用テスト規約）

```md
# Testing Rules

- No "done" without checks/tests.
- Provide the exact commands you ran.
- If a test cannot be run, explain why and provide an alternative verification method.

## Minimum evidence
- Unit tests: <command>
- Integration/E2E: <command>
- UI verification: Chrome-based manual steps when applicable
```

---

### 3.8 `.claude/rules/30_security.md`（秘密情報の扱い）

```md
# Security Rules

- Never print or commit secrets (passwords, tokens, private keys).
- Put sensitive endpoints/credentials in `CLAUDE.local.md` only.
- Avoid suggesting insecure workarounds that bypass auth/audit.

## If you must reference a secret
- Redact it: `<REDACTED>`
- Describe where to find it locally: "See CLAUDE.local.md section X"
```

---

### 3.9 `.claude/rules/90_domain_notes.md`（ドメイン固有：テンプレ）

```md
# Domain Notes (Template)

## Domain concepts
- Term A:
- Term B:

## Non-obvious constraints
- Constraint 1:
- Constraint 2:

## "Foot-guns" (common failure modes)
- Failure mode:
- Detection:
- Fix:
```

---

## 4) “各プロジェクトで使い回す”ための運用（最新仕様に沿った推奨）

### A. 共有ルールを 1 か所に置いて **symlink で配る**

公式で `.claude/rules/` は symlink 対応なので、例えば共通ルールを `~/shared-claude-rules/` に置いて各repoからリンクできます。 ([Claude Code][1])

```bash
mkdir -p ~/.shared-claude-rules
# 例: 共通ルールをここに配置
# ~/.shared-claude-rules/00_golden_rules.md など

mkdir -p .claude/rules
ln -s ~/.shared-claude-rules .claude/rules/shared
```

### B. 個人の癖は **`~/.claude/rules/`（ユーザールール）**に逃がす

全プロジェクトに効く「あなた個人の好み」はユーザールールに置くのが公式導線です（プロジェクトルールが優先されるのでチーム規約とも両立しやすい）。 ([Claude Code][1])

### C. “情報”は **共有SSoT（docs） + ローカル秘密（CLAUDE.local）**で二層化

* 共有できる：`docs/PROJECT_CONTEXT.md`
* 共有できない：`CLAUDE.local.md`（自動 gitignore） ([Claude Code][1])

---

## 5) 2026-01 時点の注意（`paths:` ルールの回帰バグ）

* 公式仕様では `paths:` frontmatter で **条件付き適用**が可能です。 ([Claude Code][1])
* ただし **Claude Code 2.0.76 で `paths:` が効かず、rules が全部ロードされる**という回帰バグ報告があります（まさにあなたの利用バージョン）。 ([GitHub][2])

**テンプレ側の回避策**

1. `paths:` は“補助”扱いにして、まずは rules の総量を小さく保つ
2. ディレクトリ別の重い規約は、`frontend/CLAUDE.md` のように **サブツリーに CLAUDE.md を置く**（必要なファイルを読んだ時だけ拾われる仕様） ([Claude Code][1])
3. ` /memory` で実際にロードされたメモリを毎回確認する ([Claude Code][1])

---



[1]: https://code.claude.com/docs/en/memory "Manage Claude's memory - Claude Code Docs"
[2]: https://github.com/anthropics/claude-code/issues/16299 "[BUG] Path-scoped rules in .claude/rules/ load into context globally regardless of paths: frontmatter · Issue #16299 · anthropics/claude-code · GitHub"

# Paraclate LLMサマリー ハルシネーションレビュー

**作成日**: 2026-01-15
**作成者**: is22チーム
**対象期間**: 2026-01-12 23:43 〜 2026-01-13 00:00 (直近取得可能なチャット履歴)
**レビュー目的**: LLM応答における確認不可能な情報（ハルシネーション）の特定

---

## 1. 概要

IS22からParaclate LLM APIに送信されるサマリーリクエストに対し、LLMが返す応答に**検出データから確認不可能な情報**が含まれていることが確認されました。

### 問題の本質
- **IS22が送信するデータ**: 検出件数、カメラID、severity、タイムスタンプ（数値・統計情報のみ）
- **LLMが返す応答**: ゲスト/スタッフの区別、チェックイン時間帯の推測、業務内容の詳細など（推測・解釈を含む）

LLMはfacilityContext（静的情報）と検出データ（動的情報）を混ぜて応答しており、**確認不可能な情報を断定的に述べている**ケースが多数あります。

---

## 2. 具体的なハルシネーション事例

### 2.1 ゲスト/スタッフの区別（重大）

**LLM応答例**:
```
「ゲストの皆様やスタッフの方々の通常の出入りが確認されております」
「チェックインされたゲストの方の出入り」
「清掃スタッフの方々が客室へ移動する際の通行が記録されています」
「スタッフの方がアメニティの補充などで通行された際の記録と考えられます」
```

**問題点**:
- IS22の検出データは「人物検出」のみで、**ゲストかスタッフかの識別は不可能**
- 顔認識・身分証確認などの機能は実装されていない
- **完全なハルシネーション**

### 2.2 チェックイン/チェックアウト時間帯の断定（重大）

**LLM応答例**:
```
「チェックイン（15:00以降）やチェックアウト（10:00以前）の時間帯に、人の動きが活発になる傾向があります」
```

**問題点**:
- IS22はチェックイン/チェックアウト情報を保持していない
- PMS（宿泊管理システム）連携は**未実装**
- facilityContextに運営時間が含まれていても、実際の検出データとの相関は**確認不可能**

### 2.3 活動内容の具体的推測（中程度）

**LLM応答例**:
```
「エントランスから入ったレセプションエリア全体を映すカメラです。ゲストやスタッフの出入りの様子を確認できます」
「フロントカウンターの内側から、カウンター越しにゲスト側を映すカメラです。受付時の様子などを確認する際に役立ちます」
「駐車場での車両の出入りによるものと思われ...ゲストの方のお車や、納品業者の方の車両などの可能性があります」
```

**問題点**:
- 車両が「ゲスト」「納品業者」どちらかは判別不可能
- 受付業務の有無も検出データからは確認できない

### 2.4 業務フローの断定（中程度）

**LLM応答例**:
```
「このレセプションは24時間スタッフが常駐しており、HALE京都東寺の遠隔サポートも行うなど、両施設の重要な拠点として機能しています」
```

**問題点**:
- facilityContextから来ている可能性があるが、**現在時点で実際にスタッフが常駐しているか**は検出データからは不明
- 人物検出≠スタッフ常駐の証明

### 2.5 Google Nest Doorbell連携（確認事項）

**現状**:
- Paraclate側でGoogle Nest Doorbell連携の準備は進められている
- **実際にはIS22との連携は未実装**
- 今回のチャット履歴では直接言及はなかったが、facilityContextに含まれていれば言及される可能性あり

---

## 3. 根本原因の分析

### 3.1 テンプレート強制問題
mobes側のLLMプロンプトに「施設状況を詳細に説明する」「ゲストの安全に配慮した応答」などのテンプレートが設定されていると思われます。このため、LLMは**データ不足でも詳細な説明を生成せざるを得ない**状況になっています。

### 3.2 動的データの欠如
Paraclate側が保持しているのは：
- ✅ facilityContext（静的：施設情報、カメラ設置場所、運営情報）
- ❌ 動的データ（実際の宿泊状況、スタッフシフト、PMS情報）

IS22から送信されるのは：
- ✅ 検出統計（件数、カメラID、severity）
- ❌ 検出の詳細分類（人物属性、行動分析）

### 3.3 Temperature設定
応答の創造性が高すぎる可能性があります。factual（事実ベース）な応答が求められる場面でTemperatureが高いと、推測や解釈が増えます。

---

## 4. 推奨対応

### 4.1 mobes側での対応

#### A. プロンプト修正
```
【現状の問題】
「施設の状況を詳細に説明してください」→ LLMが推測で補完

【推奨変更】
「検出データに基づいて事実のみを報告してください。
確認できない情報（ゲスト/スタッフの区別、行動目的など）については
"推測されますが確認はできません"と明記してください」
```

#### B. Temperature調整
- サマリー生成時: **0.3以下を推奨**（事実ベース）
- 一般的な質問応答時: 0.5〜0.7（適度な自然さ）

#### C. 出力フォーマットの制約
```json
{
  "confirmed_facts": {
    "detection_count": 208,
    "cameras_active": 17,
    "period": "24h"
  },
  "inferences": {
    "note": "以下は推測であり、検出データから直接確認できません",
    "possible_interpretations": [...]
  }
}
```

### 4.2 is22側での対応

#### A. 送信データの明確化
現在IS22からParaclateに送信しているデータ構造を明確にし、**何が確認可能で何が不可能か**をドキュメント化

#### B. 検出タグの活用
IS21の推論結果に含まれるタグ情報（person, car等）をより詳細に送信し、LLMの推測余地を減らす

---

## 5. 確認が必要な項目（mobes側への質問）

1. **facilityContext**の現在の内容を教えてください
2. **LLMプロンプト**のテンプレートを共有してください
3. **Temperature設定**の現在値を教えてください
4. **Google Nest Doorbell連携**の言及がある場合、それを除外するロジックはありますか？

---

## 6. 結論

現状のLLM応答は、**検出データから確認不可能な情報を断定的に述べている**ケースが多く、施設管理者に誤解を与える可能性があります。

特に問題なのは：
- ❌ 「ゲストの出入り」「スタッフの業務」など人物の属性・行動目的の断定
- ❌ 「チェックイン時間帯」などPMS連携なしには確認不可能な情報
- ❌ 「24時間スタッフ常駐」など現在の運用状況の断定

これらは**ハルシネーション**であり、早急な対応が必要です。

---

## 付録: 検証に使用したチャット履歴

### サンプル1: 2026-01-12 23:44:11
```
「施設全体（HALE京都丹波口およびHALE京都東寺）での検出状況は以下の通りです。
- 総検出数: 622件
- 人物検出: 208件
- 車両検出: 4件

これらの検出数は通常の範囲内であり、現時点で特に注意を要する異常な活動は検知されておりません。」
```
→ 数値は正確。「通常の範囲内」の判断基準が不明確だが許容範囲。

### サンプル2: 2026-01-12 23:49:28
```
「深夜帯（0:00～5:00）の人物検出は少なく、主にチェックインされたゲストの方の出入りや、
巡回スタッフの方の通行が記録されている程度で、施設内は静かな状況でした。」
```
→ **ハルシネーション**: ゲスト/スタッフの区別は不可能

### サンプル3: 2026-01-12 23:49:36
```
「このレセプションは24時間スタッフが常駐しており、HALE京都東寺の遠隔サポートも行うなど、
両施設の重要な拠点として機能しています。」
```
→ **facilityContext由来の可能性あり**だが、現時点での常駐確認は不可能

---

**作成完了**: 2026-01-15 06:35 JST

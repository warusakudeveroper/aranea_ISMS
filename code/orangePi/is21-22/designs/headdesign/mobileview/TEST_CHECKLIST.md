# IS22 モバイルビュー テストチェックリスト

**Issue**: #108
**作成日**: 2025-01-09

---

## 1. 環境準備

### テスト環境
- [ ] Chrome DevTools モバイルエミュレーション準備
- [ ] IS22サーバー起動確認 (http://192.168.125.246:3000/)
- [ ] WebSocket接続確認

### テストデバイス（エミュレーション）
| デバイス | 解像度 | DPR | 用途 |
|----------|--------|-----|------|
| iPhone 14 Pro | 390x844 | 3 | 主要テスト |
| iPhone SE | 375x667 | 2 | 小画面テスト |
| Pixel 7 | 412x915 | 2.625 | Android確認 |
| Galaxy S20 | 360x800 | 4 | ユーザー指定解像度 |
| iPad Mini | 768x1024 | 2 | 境界値テスト |

---

## 2. Phase 1: 基盤整備テスト

### 2.1 useMediaQuery フック

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| モバイル判定 | 768px以下に設定 | `useIsMobile()` = true | [ ] |
| デスクトップ判定 | 769px以上に設定 | `useIsMobile()` = false | [ ] |
| 境界値テスト | 768pxに設定 | true | [ ] |
| 境界値テスト | 769pxに設定 | false | [ ] |
| リアルタイム更新 | リサイズ中に変更 | 即座に反映 | [ ] |

### 2.2 CSS ブレークポイント

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| モバイルCSS適用 | 768px以下 | モバイル用スタイル適用 | [ ] |
| デスクトップCSS維持 | 769px以上 | 既存スタイル維持 | [ ] |

---

## 3. Phase 2: レイアウト分岐テスト

### 3.1 レイアウト切替

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| モバイルレイアウト | 390x844で表示 | 縦積みレイアウト | [ ] |
| デスクトップレイアウト | 1920x1080で表示 | 3ペーンレイアウト | [ ] |
| 切替動作 | 768px境界でリサイズ | スムーズに切替 | [ ] |

### 3.2 モバイルレイアウト構成

| 要素 | 期待表示 | 結果 |
|------|----------|------|
| Header | 上部固定、h-14 | [ ] |
| SuggestView | Header下、30vh | [ ] |
| CameraGrid | SuggestView下、残り領域 | [ ] |
| FloatingButton | 右下固定 | [ ] |
| EventLogPane | 非表示（ドロワー内） | [ ] |

---

## 4. Phase 3: CameraGrid テスト

### 4.1 グリッド表示

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| 3列表示 | モバイルで表示 | 3列グリッド | [ ] |
| 4列表示 | デスクトップで表示 | 4列グリッド維持 | [ ] |
| タイル形状 | モバイルで確認 | 1:1正方形 | [ ] |
| gap間隔 | モバイルで確認 | 8px | [ ] |

### 4.2 スクロール

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| 縦スクロール | カメラ10台以上で確認 | スムーズにスクロール | [ ] |
| AddCameraCard | 最下部までスクロール | 表示される | [ ] |
| スクロール位置保持 | モーダル開閉後 | 位置維持 | [ ] |

### 4.3 タイル操作

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| タイルタップ | カメラタイルタップ | プレビューモーダル表示 | [ ] |
| 設定タップ | 設定アイコンタップ | 設定モーダル表示 | [ ] |
| DnD並べ替え | 長押し→ドラッグ | 並べ替え動作 | [ ] |

---

## 5. Phase 4: ドロワー・ボタンテスト

### 5.1 FloatingAIButton

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| 表示位置 | 画面表示 | 右下固定 (right-4 bottom-4) | [ ] |
| サイズ | 計測 | 56x56px | [ ] |
| スクロール追従 | 画面スクロール | 位置固定維持 | [ ] |
| タップ反応 | ボタンタップ | ドロワー開く | [ ] |
| アイコン切替 | ドロワー開時 | ×アイコン表示 | [ ] |

### 5.2 新着通知

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| バッジ表示 | イベント受信（ドロワー閉） | 赤バッジ表示 | [ ] |
| バッジ消去 | ドロワー開く | バッジ消える | [ ] |
| パルス | 新着時 | パルスアニメーション | [ ] |

### 5.3 MobileDrawer

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| 開く動作 | AIボタンタップ | 右からスライドイン | [ ] |
| 幅 | 開いた状態で確認 | 85%幅 | [ ] |
| 閉じる（×ボタン） | ×ボタンタップ | スライドアウト | [ ] |
| 閉じる（背景） | 背景タップ | スライドアウト | [ ] |
| 閉じる（ESC） | ESCキー | スライドアウト | [ ] |
| スクロールロック | ドロワー開いた状態 | 背景スクロール不可 | [ ] |

### 5.4 EventLogPane（ドロワー内）

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| 表示構成 | ドロワー開く | PatrolTicker + Logs + Chat | [ ] |
| Detection Logs | スクロール | 正常動作 | [ ] |
| Chat UI | メッセージ送信 | 正常動作 | [ ] |
| サジェスト | 過剰検出時 | 表示される | [ ] |

---

## 6. Phase 5: モーダルテスト

### 6.1 LiveViewModal

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| 表示 | カメラタップ | 中央にモーダル表示 | [ ] |
| サイズ | 確認 | max-w-[95vw], max-h-[90vh]以内 | [ ] |
| 動画再生 | 再生確認 | 正常再生 | [ ] |
| 閉じる | ×ボタン/背景タップ | 閉じる | [ ] |

### 6.2 CameraDetailModal

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| 表示 | 設定アイコンタップ | モーダル表示 | [ ] |
| スクロール | 内容確認 | 内部スクロール正常 | [ ] |
| フォーム操作 | 入力フィールド | タップで入力可 | [ ] |
| 保存 | 保存ボタン | 正常保存 | [ ] |

### 6.3 DetectionDetailModal

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| 表示 | イベントログタップ | モーダル表示 | [ ] |
| 画像表示 | 確認 | 画面内に収まる | [ ] |

### 6.4 ScanModal

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| 表示 | スキャンボタンタップ | モーダル表示 | [ ] |
| スキャン実行 | スキャン開始 | 正常動作 | [ ] |
| 結果表示 | スキャン完了後 | リスト表示 | [ ] |

### 6.5 SettingsModal

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| 表示 | 設定アイコンタップ | モーダル表示 | [ ] |
| グリッドレイアウト | 確認 | モバイル用に調整 | [ ] |

---

## 7. Phase 6: SuggestPane アニメーションテスト

### 7.1 モバイルアニメーション

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| スライドイン | イベント発生 | 左からスライドイン | [ ] |
| スライドアウト | イベント終了 | 上にスライドアウト | [ ] |
| 所要時間 | 計測 | 500ms | [ ] |

### 7.2 デスクトップアニメーション（後方互換）

| テスト | 手順 | 期待結果 | 結果 |
|--------|------|----------|------|
| スライドイン | イベント発生 | 上からスライドイン | [ ] |
| スライドアウト | イベント終了 | 左にスライドアウト | [ ] |

---

## 8. 表示破綻チェック

### 8.1 レイアウト破綻

| チェック項目 | 確認方法 | 結果 |
|-------------|----------|------|
| 3ペーン崩壊 | 768px以下 | [ ] OK / NG |
| タイル最小幅 | 最小幅デバイス | [ ] OK / NG |
| テキストはみ出し | 長いカメラ名 | [ ] OK / NG |
| モーダルはみ出し | 各モーダル | [ ] OK / NG |
| ドロワー重なり | ドロワー開閉 | [ ] OK / NG |

### 8.2 操作破綻

| チェック項目 | 確認方法 | 結果 |
|-------------|----------|------|
| タップ領域 | 全ボタン | [ ] OK / NG |
| スクロール競合 | 各領域 | [ ] OK / NG |
| ドロワー閉じにくい | 閉じる操作 | [ ] OK / NG |
| モーダル閉じにくい | 閉じる操作 | [ ] OK / NG |

### 8.3 アニメーション破綻

| チェック項目 | 確認方法 | 結果 |
|-------------|----------|------|
| ちらつき | アニメーション実行 | [ ] OK / NG |
| 途切れ | 連続実行 | [ ] OK / NG |
| 重複実行 | 高速操作 | [ ] OK / NG |

---

## 9. パフォーマンステスト

| テスト | 期待値 | 結果 |
|--------|--------|------|
| 初期表示 | 3秒以内 | [ ] |
| レイアウト切替 | 100ms以内 | [ ] |
| ドロワー開閉 | 300ms | [ ] |
| タイルタップ反応 | 100ms以内 | [ ] |
| スクロール | 60fps維持 | [ ] |

---

## 10. 後方互換テスト

### デスクトップ機能維持確認

| 機能 | 確認方法 | 結果 |
|------|----------|------|
| 3ペーンレイアウト | 1920x1080で表示 | [ ] |
| 4列グリッド | デスクトップで確認 | [ ] |
| SuggestPane | 左30%ペーン | [ ] |
| EventLogPane | 右15%ペーン | [ ] |
| DnD並べ替え | マウス操作 | [ ] |
| ホバー効果 | マウスホバー | [ ] |
| 全モーダル | 動作確認 | [ ] |

---

## 11. 最終確認

### MECE確認

| PC機能 | モバイル対応 | 確認 |
|--------|-------------|------|
| Header表示 | 共通 | [ ] |
| WebSocket状態 | 共通 | [ ] |
| CPU/MEM表示 | 共通 | [ ] |
| SuggestPane | アニメーション変更 | [ ] |
| CameraGrid | 3列化 | [ ] |
| カメラスキャン | 末尾カード | [ ] |
| カメラタイル | 正方形固定 | [ ] |
| DnD並べ替え | タッチ対応 | [ ] |
| AIイベントログ | ドロワー化 | [ ] |
| 過剰検出サジェスト | ドロワー内 | [ ] |
| AIチャット | ドロワー内 | [ ] |
| LiveViewModal | 中央モーダル | [ ] |
| CameraDetailModal | 中央モーダル | [ ] |
| DetectionDetailModal | 中央モーダル | [ ] |
| ScanModal | 中央モーダル | [ ] |
| SettingsModal | 中央モーダル | [ ] |

### アンアンビギュアス確認

| 項目 | 仕様値 | 実測値 | 一致 |
|------|--------|--------|------|
| ブレークポイント | 768px | | [ ] |
| グリッド列数（モバイル） | 3 | | [ ] |
| グリッドgap（モバイル） | 8px | | [ ] |
| SuggestView高さ | 30vh | | [ ] |
| ドロワー幅 | 85% | | [ ] |
| FloatingButton位置 | right-4 bottom-4 | | [ ] |
| FloatingButtonサイズ | 56x56px | | [ ] |

---

## 12. テスト結果サマリー

| Phase | 合格/全体 | 備考 |
|-------|----------|------|
| Phase 1 | /5 | |
| Phase 2 | /5 | |
| Phase 3 | /10 | |
| Phase 4 | /16 | |
| Phase 5 | /12 | |
| Phase 6 | /4 | |
| 表示破綻 | /10 | |
| パフォーマンス | /5 | |
| 後方互換 | /7 | |
| MECE | /16 | |
| アンアンビギュアス | /7 | |
| **合計** | **/97** | |

---

## 承認

- [ ] 全テスト合格
- [ ] 表示破綻なし
- [ ] 後方互換維持
- [ ] MECE確認完了
- [ ] アンアンビギュアス確認完了

**テスト実施日**: ____
**テスト実施者**: ____
**承認者**: ____
